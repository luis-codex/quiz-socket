import{r as s,j as o,u as w}from"./index-C0czlPpn.js";import{u as z,f as $,M as T,a as U,P as B,L as F,B as K,m as O}from"./motion-Dn67xL6J.js";function P(){const e=s.useRef(!1);return z(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function V(){const e=P(),[r,n]=s.useState(0),t=s.useCallback(()=>{e.current&&n(r+1)},[r]);return[s.useCallback(()=>$.postRender(t),[t]),r]}class D extends s.Component{getSnapshotBeforeUpdate(r){const n=this.props.childRef.current;if(n&&r.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=n.offsetHeight||0,t.width=n.offsetWidth||0,t.top=n.offsetTop,t.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H({children:e,isPresent:r}){const n=s.useId(),t=s.useRef(null),u=s.useRef({width:0,height:0,top:0,left:0}),{nonce:f}=s.useContext(T);return s.useInsertionEffect(()=>{const{width:p,height:l,top:m,left:h}=u.current;if(r||!t.current||!p||!l)return;t.current.dataset.motionPopId=n;const i=document.createElement("style");return f&&(i.nonce=f),document.head.appendChild(i),i.sheet&&i.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${l}px !important;
            top: ${m}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(i)}},[r]),o.jsx(D,{isPresent:r,childRef:t,sizeRef:u,children:s.cloneElement(e,{ref:t})})}const M=({children:e,initial:r,isPresent:n,onExitComplete:t,custom:u,presenceAffectsLayout:f,mode:p})=>{const l=U(W),m=s.useId(),h=s.useMemo(()=>({id:m,initial:r,isPresent:n,custom:u,onExitComplete:i=>{l.set(i,!0);for(const a of l.values())if(!a)return;t&&t()},register:i=>(l.set(i,!1),()=>l.delete(i))}),f?[Math.random()]:[n]);return s.useMemo(()=>{l.forEach((i,a)=>l.set(a,!1))},[n]),s.useEffect(()=>{!n&&!l.size&&t&&t()},[n]),p==="popLayout"&&(e=o.jsx(H,{isPresent:n,children:e})),o.jsx(B.Provider,{value:h,children:e})};function W(){return new Map}function G(e){return s.useEffect(()=>()=>e(),[])}const x=e=>e.key||"";function Z(e,r){e.forEach(n=>{const t=x(n);r.set(t,n)})}function _(e){const r=[];return s.Children.forEach(e,n=>{s.isValidElement(n)&&r.push(n)}),r}const q=({children:e,custom:r,initial:n=!0,onExitComplete:t,exitBeforeEnter:u,presenceAffectsLayout:f=!0,mode:p="sync"})=>{const l=s.useContext(F).forceRender||V()[0],m=P(),h=_(e);let i=h;const a=s.useRef(new Map).current,g=s.useRef(i),C=s.useRef(new Map).current,k=s.useRef(!0);if(z(()=>{k.current=!1,Z(h,C),g.current=i}),G(()=>{k.current=!0,C.clear(),a.clear()}),k.current)return o.jsx(o.Fragment,{children:i.map(c=>o.jsx(M,{isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:f,mode:p,children:c},x(c)))});i=[...i];const R=g.current.map(x),E=h.map(x),A=R.length;for(let c=0;c<A;c++){const d=R[c];E.indexOf(d)===-1&&!a.has(d)&&a.set(d,void 0)}return p==="wait"&&a.size&&(i=[]),a.forEach((c,d)=>{if(E.indexOf(d)!==-1)return;const v=C.get(d);if(!v)return;const L=R.indexOf(d);let j=c;if(!j){const S=()=>{a.delete(d);const b=Array.from(C.keys()).filter(y=>!E.includes(y));if(b.forEach(y=>C.delete(y)),g.current=h.filter(y=>{const N=x(y);return N===d||b.includes(N)}),!a.size){if(m.current===!1)return;l(),t&&t()}};j=o.jsx(M,{isPresent:!1,onExitComplete:S,custom:r,presenceAffectsLayout:f,mode:p,children:v},x(v)),a.set(d,j)}i.splice(L,0,j)}),i=i.map(c=>{const d=c.key;return a.has(d)?c:o.jsx(M,{isPresent:!0,presenceAffectsLayout:f,mode:p,children:c},x(c))}),o.jsx(o.Fragment,{children:a.size?i:i.map(c=>s.cloneElement(c))})};function J(){const[e,r]=s.useState(!1),n=s.useCallback(t=>{navigator.clipboard.writeText(t).then(()=>{r(!0),setTimeout(()=>r(!1),1500)})},[]);return s.useEffect(()=>{const t=setTimeout(()=>r(!1),1500);return()=>clearTimeout(t)},[]),{copied:e,handleCopy:n}}/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=(e,r)=>{const n=s.forwardRef(({color:t="currentColor",size:u=24,strokeWidth:f=2,absoluteStrokeWidth:p,className:l="",children:m,...h},i)=>s.createElement("svg",{ref:i,...Q,width:u,height:u,stroke:t,strokeWidth:p?Number(f)*24/Number(u):f,className:["lucide",`lucide-${X(e)}`,l].join(" "),...h},[...r.map(([a,g])=>s.createElement(a,g)),...Array.isArray(m)?m:[m]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=I("CopyCheck",[["path",{d:"m12 15 2 2 4-4",key:"2c609p"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.373.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=I("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function te(){const e=w(n=>n.socket),r=()=>{e==null||e.emit("message","Hello from client "+new Date().getTime())};return o.jsx(K,{onClick:r,children:"Send message"})}function ne(){const e=w(t=>t.socket),[r,n]=s.useState("");return s.useEffect(()=>{if(e)return e.on("message",t=>{n(t)}),()=>{e.off("message")}},[e]),o.jsx("p",{children:r})}function re(){const e=w(t=>t.socket),[r,n]=s.useState([]);return s.useEffect(()=>{if(e)return e.emit("get-participants"),e.on("participants",n),()=>{e.off("participants")}},[e]),o.jsx("ul",{className:"flex -space-x-4 rtl:space-x-reverse",children:o.jsx(q,{children:r.map(t=>o.jsx(O.img,{layoutId:t.avatarUrl,className:'size-10 rounded-full border data-[loading="true"]:bg-border data-[loading="true"]:animate-pulse',src:t.avatarUrl,alt:t.name,width:"30",height:"30",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},"data-loading":"true",onLoad:u=>u.currentTarget.setAttribute("data-loading","false")},t.id))})})}function se(){const r=w(u=>u.getAuth)(),{copied:n,handleCopy:t}=J();return r?o.jsxs("div",{className:"flex gap-2 max-w-40",children:[o.jsx("img",{src:r.avatarUrl,alt:r.name,className:"size-10 rounded-full grid-rows-2"}),o.jsxs("div",{className:"truncate",children:[o.jsx("p",{className:"font-bold",children:r.name}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("p",{className:"text-xs text-gray-500 truncate",children:r.roomId}),o.jsx("button",{onClick:()=>t(r.roomId),"data-copied":n,className:'*:size-3 data-[copied="true"]:text-green-500',children:n?o.jsx(Y,{}):o.jsx(ee,{})})]})]})]}):null}function ae(){return o.jsxs("div",{children:[o.jsxs("nav",{className:"flex justify-between",children:[o.jsx(re,{}),o.jsx(se,{})]}),o.jsx("hr",{}),o.jsx("br",{}),o.jsx("h1",{children:"Socket.io"}),o.jsx(te,{}),o.jsx(ne,{})]})}export{ae as default};
